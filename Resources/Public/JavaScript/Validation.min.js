jQuery.fn.femanagerValidation=function(a){var e,n=a(this),t=!1;0==n.find("*[data-validation]").length&&(t=!0);var i,r,o,l=function(e){e||(e={}),i=e.numRequest||0,r=e.requestsCompleted||0,n=e.element||0,o=[];var l=function(){a("body").css("cursor","default"),function(a){if(0==a.find(".error").length)t=!0,a.trigger("submit");else{const e=a.find(".error:first")[0];if(!e)return;e.scrollIntoView({behavior:"smooth"})}}(n);for(var e=0;e<o.length;e++)o[e]()};e.singleCallback&&o.push(e.singleCallback),this.addCallbackToQueue=function(a,e){a&&r++,e&&o.push(e),r==i&&l()},this.requestComplete=function(a){a&&r++,r==i&&l()},this.setCallback=function(a){o.push(callBack)}};function s(n,t){if(n.prop("disabled"))t&&e.addCallbackToQueue(!0);else{var i=n.closest("form"),r=i.data("femanager-plugin"),o="tx_"+i.data("femanager-plugin-name"),l=i.find("div:first").find('input[name="'+o+'[user][__identity]"]').val(),s=i.find("div:first").find('input[name="'+o+'[__referrer][@action]"]').val(),u=Femanager.getBaseUrl()+"?id="+a("#femanagerPid").val()+"&type=1548935210",c=a("#femanagerStoragePid").val(),v=n.attr("data-validation"),g=function(a){return a.attr("data-validation").split(",")}(n),m=n.val();"checkbox"==n.prop("type")&&0==n.prop("checked")&&(m="");var p="";if(d(g,"sameAs")){var h=function(a){var e="";if(-1!==a.indexOf("(")){var n=a.split("(");e=n[1].substr(0,n[1].length-1)}return e}(d(g,"sameAs")),b=a('input[name="'+o+"[user]["+h+']"]');p=b.val(),"checkbox"==b.prop("type")&&0==b.prop("checked")&&(p="")}var _={storagePid:c,L:a("#femanagerLanguage").val(),id:a("#femanagerPid").val()};_["tx_femanager_validation[validation]"]=v,_["tx_femanager_validation[value]"]=m,_["tx_femanager_validation[field]"]=function(a){var e="",n=a.prop("name").split("[");e=void 0!==n[2]?n[2].replace("]",""):n[1].replace("]","");return e}(n),_["tx_femanager_validation[user]"]=void 0!==l?l:"",_["tx_femanager_validation[additionalValue]"]=p||"",_["tx_femanager_validation[plugin]"]=r,_["tx_femanager_validation[pluginName]"]=o,_["tx_femanager_validation[referrerAction]"]=s,a.ajax({url:u,data:_,type:"POST",cache:!1,success:function(i){if(t&&e.addCallbackToQueue(!0),i)try{i.validate?f(n):function(e,n){f(e);var t=a(".femanager_validation_container").html().replace("###messages###",n);e.before(t),e.closest(".form-group").addClass("has-error"),e.addClass("error")}(n,i.message)}catch(a){n.before(data)}},error:function(){"object"==typeof console&&console.log("Error: The called url is not available - if you use TYPO3 in a subfolder, please use config.baseURL in TypoScript")}})}}function f(a){a.closest(".form-group").removeClass("has-error"),a.siblings(".alert").remove(),a.removeClass("error")}function d(a,e){for(var n=0;n<a.length;n++)if(-1!==a[n].indexOf(e))return a[n];return""}a('*[data-validation]:not([type="file"])').on("blur",(function(){s(a(this),!1)})),a('*[data-validation][type="file"]').on("change",(function(){s(a(this),!1)})),n.on("submit",(function(n){a("body").css("cursor","wait"),t||(n.preventDefault(),function(n){e=new l({numRequest:n.find("*[data-validation]").length,element:n}),n.find("*[data-validation]").each((function(){s(a(this),!0)}))}(a(this)))}))};