jQuery.fn.femanagerValidation=function(a){function e(e){d=new g({numRequest:e.find("*[data-validation]").length,element:e}),e.find("*[data-validation]").each(function(){n(a(this),!0)})}function n(e,n){if(e.prop("disabled"))return void(n&&d.addCallbackToQueue(!0));var o=e.closest("form"),c=o.data("femanager-plugin"),v="tx_"+o.data("femanager-plugin-name"),g=o.find("div:first").find('input[name="'+v+'[user][__identity]"]').val(),m=o.find("div:first").find('input[name="'+v+'[__referrer][@action]"]').val(),p=Femanager.getBaseUrl()+"?id="+a("#femanagerPid").val()+"&type=1548935210",h=a("#femanagerStoragePid").val(),b=e.attr("data-validation"),_=s(e),x=e.val();"checkbox"==e.prop("type")&&0==e.prop("checked")&&(x="");var y="";if(l(_,"sameAs")){var C=l(_,"sameAs"),k=f(C),T=a('input[name="'+v+"[user]["+k+']"]');y=T.val(),"checkbox"==T.prop("type")&&0==T.prop("checked")&&(y="")}var P={storagePid:h,L:a("#femanagerLanguage").val(),id:a("#femanagerPid").val()};P["tx_femanager_validation[validation]"]=b,P["tx_femanager_validation[value]"]=x,P["tx_femanager_validation[field]"]=t(e),P["tx_femanager_validation[user]"]=void 0!==g?g:"",P["tx_femanager_validation[additionalValue]"]=y?y:"",P["tx_femanager_validation[plugin]"]=c,P["tx_femanager_validation[pluginName]"]=v,P["tx_femanager_validation[referrerAction]"]=m,a.ajax({url:p,data:P,type:"POST",cache:!1,success:function(a){if(n&&d.addCallbackToQueue(!0),a)try{a.validate?r(e):i(e,a.message)}catch(t){e.before(data)}},error:function(){u()}})}function t(a){var e="",n=a.prop("name").split("[");return e=void 0!==n[2]?n[2].replace("]",""):n[1].replace("]","")}function i(e,n){r(e);var t=a(".femanager_validation_container").html().replace("###messages###",n);e.before(t),e.closest(".form-group").addClass("has-error"),e.addClass("error")}function r(a){a.closest(".form-group").removeClass("has-error"),a.siblings(".alert").remove(),a.removeClass("error")}function o(a){if(0==a.find(".error").length)v=!0,a.trigger("submit");else{const e=a.find(".error:first")[0];if(!e)return;e.scrollIntoView({behavior:"smooth"})}}function l(a,e){for(var n=0;n<a.length;n++)if(a[n].indexOf(e)!==-1)return a[n];return""}function s(a){return a.attr("data-validation").split(",")}function f(a){var e="";if(a.indexOf("(")!==-1){var n=a.split("(");e=n[1].substr(0,n[1].length-1)}return e}function u(){"object"==typeof console&&console.log("Error: The called url is not available - if you use TYPO3 in a subfolder, please use config.baseURL in TypoScript")}var d,c=a(this),v=!1;0==c.find("*[data-validation]").length&&(v=!0);var g=function(){var e,n,t;return function(i){i||(i={}),e=i.numRequest||0,n=i.requestsCompleted||0,c=i.element||0,t=[];var r=function(){a("body").css("cursor","default"),o(c);for(var e=0;e<t.length;e++)t[e]()};i.singleCallback&&t.push(i.singleCallback),this.addCallbackToQueue=function(a,i){a&&n++,i&&t.push(i),n==e&&r()},this.requestComplete=function(a){a&&n++,n==e&&r()},this.setCallback=function(a){t.push(callBack)}}}();a('*[data-validation]:not([type="file"])').on("blur",function(){n(a(this),!1)}),a('*[data-validation][type="file"]').on("change",function(){n(a(this),!1)}),c.on("submit",function(n){a("body").css("cursor","wait"),v||(n.preventDefault(),e(a(this)))})};